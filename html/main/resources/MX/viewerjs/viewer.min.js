/*!
 * Viewer.js v1.0.0
 * https://github.com/fengyuanchen/viewerjs
 *
 * Copyright (c) 2015-2018 Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2018-05-09T06:09:22.503Z
 */
! function(a, b) { "object" == typeof exports && "undefined" != typeof module ? module.exports = b() : "function" == typeof define && define.amd ? define(b) : a.Viewer = b() }(this, function() {
    "use strict";

    function W(a) { return "string" == typeof a }

    function Y(a) { return "number" == typeof a && !X(a) }

    function Z(a) { return "undefined" == typeof a }

    function $(a) { return "object" === ("undefined" == typeof a ? "undefined" : S(a)) && null !== a }

    function ab(a) { var b, c; if (!$(a)) return !1; try { return b = a.constructor, c = b.prototype, b && c && _.call(c, "isPrototypeOf") } catch (d) { return !1 } }

    function bb(a) { return "function" == typeof a }

    function cb(a, b) { var c, d; if (a && bb(b))
            if (Array.isArray(a) || Y(a.length))
                for (c = a.length, d = void 0, d = 0; c > d && b.call(a, a[d], d, a) !== !1; d += 1);
            else $(a) && Object.keys(a).forEach(function(c) { b.call(a, a[c], c, a) });
        return a }

    function fb(a, b) { var c = a.style;
        cb(b, function(a, b) { eb.test(b) && Y(a) && (a += "px"), c[b] = a }) }

    function gb(a, b) { return a.classList ? a.classList.contains(b) : a.className.indexOf(b) > -1 }

    function hb(a, b) { if (b) { if (Y(a.length)) return cb(a, function(a) { hb(a, b) }), void 0; if (a.classList) return a.classList.add(b), void 0; var c = a.className.trim();
            c ? c.indexOf(b) < 0 && (a.className = c + " " + b) : a.className = b } }

    function ib(a, b) { return b ? Y(a.length) ? (cb(a, function(a) { ib(a, b) }), void 0) : a.classList ? (a.classList.remove(b), void 0) : (a.className.indexOf(b) >= 0 && (a.className = a.className.replace(b, "")), void 0) : void 0 }

    function jb(a, b, c) { return b ? Y(a.length) ? (cb(a, function(a) { jb(a, b, c) }), void 0) : (c ? hb(a, b) : ib(a, b), void 0) : void 0 }

    function lb(a) { return a.replace(kb, "$1-$2").toLowerCase() }

    function mb(a, b) { return $(a[b]) ? a[b] : a.dataset ? a.dataset[b] : a.getAttribute("data-" + lb(b)) }

    function nb(a, b, c) { $(c) ? a[b] = c : a.dataset ? a.dataset[b] = c : a.setAttribute("data-" + lb(b), c) }

    function ob(a, b) { if ($(a[b])) try { delete a[b] } catch (c) { a[b] = void 0 } else if (a.dataset) try { delete a.dataset[b] } catch (c) { a.dataset[b] = void 0 } else a.removeAttribute("data-" + lb(b)) }

    function rb(a, b, c) { var d = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
            e = c;
        b.trim().split(pb).forEach(function(b) { if (!qb) { var f = a.listeners;
                f && f[b] && f[b][c] && (e = f[b][c], delete f[b][c], 0 === Object.keys(f[b]).length && delete f[b], 0 === Object.keys(f).length && delete a.listeners) }
            a.removeEventListener(b, e, d) }) }

    function sb(a, b, c) { var d = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
            e = c;
        b.trim().split(pb).forEach(function(b) { if (d.once && !qb) { var f = a.listeners,
                    g = void 0 === f ? {} : f;
                e = function() { for (var f = arguments.length, h = Array(f), i = 0; f > i; i++) h[i] = arguments[i];
                    delete g[b][c], a.removeEventListener(b, e, d), c.apply(a, h) }, g[b] || (g[b] = {}), g[b][c] && a.removeEventListener(b, g[b][c], d), g[b][c] = e, a.listeners = g }
            a.addEventListener(b, e, d) }) }

    function tb(a, b, c) { var d = void 0; return bb(Event) && bb(CustomEvent) ? d = new CustomEvent(b, { detail: c, bubbles: !0, cancelable: !0 }) : (d = document.createEvent("CustomEvent"), d.initCustomEvent(b, !0, !0, c)), a.dispatchEvent(d) }

    function ub(a) { var b = a.getBoundingClientRect(); return { left: b.left + (window.pageXOffset - document.documentElement.clientLeft), top: b.top + (window.pageYOffset - document.documentElement.clientTop) } }

    function vb(a) { var h, b = a.rotate,
            c = a.scaleX,
            d = a.scaleY,
            e = a.translateX,
            f = a.translateY,
            g = []; return Y(e) && 0 !== e && g.push("translateX(" + e + "px)"), Y(f) && 0 !== f && g.push("translateY(" + f + "px)"), Y(b) && 0 !== b && g.push("rotate(" + b + "deg)"), Y(c) && 1 !== c && g.push("scaleX(" + c + ")"), Y(d) && 1 !== d && g.push("scaleY(" + d + ")"), h = g.length ? g.join(" ") : "none", { WebkitTransform: h, msTransform: h, transform: h } }

    function wb(a) { return W(a) ? a.replace(/^.*\//, "").replace(/[?&#].*$/, "") : "" }

    function yb(a, b) { var d, c = document.createElement("img"); return a.naturalWidth && !xb ? (b(a.naturalWidth, a.naturalHeight), c) : (d = document.body || document.documentElement, c.onload = function() { b(c.width, c.height), xb || d.removeChild(c) }, c.src = a.src, xb || (c.style.cssText = "left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;", d.appendChild(c)), c) }

    function zb(a) { switch (a) {
            case 2:
                return r;
            case 3:
                return q;
            case 4:
                return p;
            default:
                return "" } }

    function Ab(a) { var b = db({}, a),
            c = []; return cb(a, function(a, d) { delete b[d], cb(b, function(b) { var d = Math.abs(a.startX - b.startX),
                    e = Math.abs(a.startY - b.startY),
                    f = Math.abs(a.endX - b.endX),
                    g = Math.abs(a.endY - b.endY),
                    h = Math.sqrt(d * d + e * e),
                    i = Math.sqrt(f * f + g * g),
                    j = (i - h) / h;
                c.push(j) }) }), c.sort(function(a, b) { return Math.abs(a) < Math.abs(b) }), c[0] }

    function Bb(a, b) { var c = a.pageX,
            d = a.pageY,
            e = { endX: c, endY: d }; return b ? e : db({ startX: c, startY: d }, e) }

    function Cb(a) { var b = 0,
            c = 0,
            d = 0; return cb(a, function(a) { var e = a.startX,
                f = a.startY;
            b += e, c += f, d += 1 }), b /= d, c /= d, { pageX: b, pageY: c } }
    var Jb, Kb, Lb, Mb, Nb, Ob, Pb, Qb, a = { inline: !1, button: !0, navbar: !0, title: !0, toolbar: !0, tooltip: !0, movable: !0, zoomable: !0, rotatable: !0, scalable: !0, transition: !0, fullscreen: !0, interval: 5e3, keyboard: !0, backdrop: !0, loading: !0, loop: !0, minWidth: 200, minHeight: 100, zoomRatio: .1, minZoomRatio: .01, maxZoomRatio: 100, zIndex: 2015, zIndexInline: 0, url: "src", container: "body", filter: null, ready: null, show: null, shown: null, hide: null, hidden: null, view: null, viewed: null },
        b = '<div class="viewer-container" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list"></ul></div></div><div class="viewer-tooltip"></div><div role="button" class="viewer-button" data-viewer-action="mix"></div><div role="button" class="viewer-left viewer-prev" data-viewer-action="prev"></div><div role="button" class="viewer-right viewer-next" data-viewer-action="next"></div><div class="viewer-player"></div></div>',
        c = "undefined" != typeof window,
        d = c ? window : {},
        e = "viewer",
        f = "move",
        g = "switch",
        h = "zoom",
        i = e + "-active",
        j = e + "-close",
        k = e + "-fade",
        l = e + "-fixed",
        m = e + "-fullscreen",
        n = e + "-fullscreen-exit",
        o = e + "-hide",
        p = e + "-hide-md-down",
        q = e + "-hide-sm-down",
        r = e + "-hide-xs-down",
        s = e + "-in",
        t = e + "-invisible",
        u = e + "-loading",
        v = e + "-move",
        w = e + "-open",
        x = e + "-show",
        y = e + "-transition",
        z = "ready",
        A = "show",
        B = "shown",
        C = "hide",
        D = "hidden",
        E = "view",
        F = "viewed",
        G = "click",
        H = "dragstart",
        I = "keydown",
        J = "load",
        K = d.PointerEvent ? "pointerdown" : "touchstart mousedown",
        L = d.PointerEvent ? "pointermove" : "touchmove mousemove",
        M = d.PointerEvent ? "pointerup pointercancel" : "touchend touchcancel mouseup",
        N = "resize",
        O = "transitionend",
        P = "wheel mousewheel DOMMouseScroll",
        Q = e + "Action",
        R = ["download", "zoom-in", "zoom-out", "one-to-one", "reset", "prev", "play", "next", "rotate-left", "rotate-right", "flip-horizontal", "flip-vertical"],
        S = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(a) { return typeof a } : function(a) { return a && "function" == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? "symbol" : typeof a },
        T = function(a, b) { if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function") },
        U = function() {
            function a(a, b) { var c, d; for (c = 0; c < b.length; c++) d = b[c], d.enumerable = d.enumerable || !1, d.configurable = !0, "value" in d && (d.writable = !0), Object.defineProperty(a, d.key, d) } return function(b, c, d) { return c && a(b.prototype, c), d && a(b, d), b } }(),
        V = function(a) { if (Array.isArray(a)) { for (var b = 0, c = Array(a.length); b < a.length; b++) c[b] = a[b]; return c } return Array.from(a) },
        X = Number.isNaN || d.isNaN,
        _ = Object.prototype.hasOwnProperty,
        db = Object.assign || function(a) { for (var b = arguments.length, c = Array(b > 1 ? b - 1 : 0), d = 1; b > d; d++) c[d - 1] = arguments[d]; return $(a) && c.length > 0 && c.forEach(function(b) { $(b) && Object.keys(b).forEach(function(c) { a[c] = b[c] }) }), a },
        eb = /^(?:width|height|left|top|marginLeft|marginTop)$/,
        kb = /([a-z\d])([A-Z])/g,
        pb = /\s\s*/,
        qb = function() { var b, e, f, a = !1; return c && (b = !1, e = function() {}, f = Object.defineProperty({}, "once", { get: function() { return a = !0, b }, set: function(a) { b = a } }), d.addEventListener("test", e, f), d.removeEventListener("test", e, f)), a }(),
        xb = d.navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(d.navigator.userAgent),
        Db = { render: function() { this.initContainer(), this.initViewer(), this.initList(), this.renderViewer() }, initContainer: function() { this.containerData = { width: window.innerWidth, height: window.innerHeight } }, initViewer: function() { var a = this.options,
                    b = this.parent,
                    c = void 0;
                a.inline && (c = { width: Math.max(b.offsetWidth, a.minWidth), height: Math.max(b.offsetHeight, a.minHeight) }, this.parentData = c), (this.fulled || !c) && (c = this.containerData), this.viewerData = db({}, c) }, renderViewer: function() { this.options.inline && !this.fulled && fb(this.viewer, this.viewerData) }, initList: function() { var a = this,
                    b = this.element,
                    c = this.options,
                    d = this.list,
                    e = [];
                cb(this.images, function(b, d) { var f = b.src,
                        g = b.alt || wb(f),
                        h = c.url;
                    W(h) ? h = b.getAttribute(h) : bb(h) && (h = h.call(a, b)), (f || h) && e.push("<li><img" + (' src="' + (f || h) + '"') + ' role="button"' + ' data-viewer-action="view"' + (' data-index="' + d + '"') + (' data-original-url="' + (h || f) + '"') + (' alt="' + g + '"') + ">" + "</li>") }), d.innerHTML = e.join(""), this.items = d.getElementsByTagName("li"), cb(this.items, function(b) { var d = b.firstElementChild;
                    nb(d, "filled", !0), c.loading && hb(b, u), sb(d, J, function(d) { c.loading && ib(b, u), a.loadImage(d) }, { once: !0 }) }), c.transition && sb(b, F, function() { hb(d, y) }, { once: !0 }) }, renderList: function(a) { var b = a || this.index,
                    c = this.items[b].offsetWidth || 30,
                    d = c + 1;
                fb(this.list, db({ width: d * this.length }, vb({ translateX: (this.viewerData.width - c) / 2 - d * b }))) }, resetList: function() { var a = this.list;
                a.innerHTML = "", ib(a, y), fb(a, vb({ translateX: 0 })) }, initImage: function(a) { var b = this,
                    c = this.options,
                    d = this.image,
                    e = this.viewerData,
                    f = this.footer.offsetHeight,
                    g = e.width,
                    h = Math.max(e.height - f, f),
                    i = this.imageData || {},
                    j = void 0;
                this.imageInitializing = { abort: function() { j.onload = null } }, j = yb(d, function(d, e) { var l, m, f = d / e,
                        j = g,
                        k = h;
                    b.imageInitializing = !1, h * f > g ? k = g / f : j = h * f, j = Math.min(.9 * j, d), k = Math.min(.9 * k, e), l = { naturalWidth: d, naturalHeight: e, aspectRatio: f, ratio: j / d, width: j, height: k, left: (g - j) / 2, top: (h - k) / 2 }, m = db({}, l), c.rotatable && (l.rotate = i.rotate || 0, m.rotate = 0), c.scalable && (l.scaleX = i.scaleX || 1, l.scaleY = i.scaleY || 1, m.scaleX = 1, m.scaleY = 1), b.imageData = l, b.initialImageData = m, a && a() }) }, renderImage: function(a) { var e, b = this,
                    c = this.image,
                    d = this.imageData;
                fb(c, db({ width: d.width, height: d.height, marginLeft: d.left, marginTop: d.top }, vb(d))), a && (this.viewing && this.options.transition ? (e = function() { b.imageRendering = !1, a() }, this.imageRendering = { abort: function() { rb(c, O, e) } }, sb(c, O, e, { once: !0 })) : a()) }, resetImage: function() { if (this.viewing || this.viewed) { var a = this.image;
                    this.viewing && this.viewing.abort(), a.parentNode.removeChild(a), this.image = null } } },
        Eb = { bind: function() { var a = this.element,
                    b = this.viewer;
                sb(b, G, this.onClick = this.click.bind(this)), sb(b, P, this.onWheel = this.wheel.bind(this)), sb(b, H, this.onDragStart = this.dragstart.bind(this)), sb(this.canvas, K, this.onPointerDown = this.pointerdown.bind(this)), sb(a.ownerDocument, L, this.onPointerMove = this.pointermove.bind(this)), sb(a.ownerDocument, M, this.onPointerUp = this.pointerup.bind(this)), sb(a.ownerDocument, I, this.onKeyDown = this.keydown.bind(this)), sb(window, N, this.onResize = this.resize.bind(this)) }, unbind: function() { var a = this.element,
                    b = this.viewer;
                rb(b, G, this.onClick), rb(b, P, this.onWheel), rb(b, H, this.onDragStart), rb(this.canvas, K, this.onPointerDown), rb(a.ownerDocument, L, this.onPointerMove), rb(a.ownerDocument, M, this.onPointerUp), rb(a.ownerDocument, I, this.onKeyDown), rb(window, N, this.onResize) } },
        Fb = { click: function(a) { var b = a.target,
                    c = this.options,
                    d = this.imageData,
                    e = mb(b, Q); switch (e) {
                    case "download":
                        this.download(this.image.getAttribute("src")); break;
                    case "mix":
                        this.played ? this.stop() : c.inline ? this.fulled ? this.exit() : this.full() : this.hide(); break;
                    case "hide":
                        this.hide(); break;
                    case "view":
                        this.view(mb(b, "index")); break;
                    case "zoom-in":
                        this.zoom(.1, !0); break;
                    case "zoom-out":
                        this.zoom(-.1, !0); break;
                    case "one-to-one":
                        this.toggle(); break;
                    case "reset":
                        this.reset(); break;
                    case "prev":
                        this.prev(c.loop); break;
                    case "play":
                        this.play(c.fullscreen); break;
                    case "next":
                        this.next(c.loop); break;
                    case "rotate-left":
                        this.rotate(-90); break;
                    case "rotate-right":
                        this.rotate(90); break;
                    case "flip-horizontal":
                        this.scaleX(-d.scaleX || -1); break;
                    case "flip-vertical":
                        this.scaleY(-d.scaleY || -1); break;
                    default:
                        this.played && this.stop() } }, load: function() { var b, c, d, e, f, a = this;
                this.timeout && (clearTimeout(this.timeout), this.timeout = !1), b = this.element, c = this.options, d = this.image, e = this.index, f = this.viewerData, ib(d, t), c.loading && ib(this.canvas, u), d.style.cssText = "height:0;" + ("margin-left:" + f.width / 2 + "px;") + ("margin-top:" + f.height / 2 + "px;") + "max-width:none!important;" + "position:absolute;" + "width:0;", this.initImage(function() { jb(d, v, c.movable), jb(d, y, c.transition), a.renderImage(function() { a.viewed = !0, a.viewing = !1, bb(c.viewed) && sb(b, F, c.viewed, { once: !0 }), tb(b, F, { originalImage: a.images[e], index: e, image: d }) }) }) }, loadImage: function(a) { var b = a.target,
                    c = b.parentNode,
                    d = c.offsetWidth || 30,
                    e = c.offsetHeight || 50,
                    f = !!mb(b, "filled");
                yb(b, function(a, c) { var g = a / c,
                        h = d,
                        i = e;
                    e * g > d ? f ? h = e * g : i = d / g : f ? i = d / g : h = e * g, fb(b, db({ width: h, height: i }, vb({ translateX: (d - h) / 2, translateY: (e - i) / 2 }))) }) }, keydown: function(a) { var b = this.options; if (this.fulled && b.keyboard) switch (a.keyCode || a.which || a.charCode) {
                    case 27:
                        this.played ? this.stop() : b.inline ? this.fulled && this.exit() : this.hide(); break;
                    case 32:
                        this.played && this.stop(); break;
                    case 37:
                        this.prev(b.loop); break;
                    case 38:
                        a.preventDefault(), this.zoom(b.zoomRatio, !0); break;
                    case 39:
                        this.next(b.loop); break;
                    case 40:
                        a.preventDefault(), this.zoom(-b.zoomRatio, !0); break;
                    case 48:
                    case 49:
                        a.ctrlKey && (a.preventDefault(), this.toggle()) } }, dragstart: function(a) { "img" === a.target.tagName.toLowerCase() && a.preventDefault() }, pointerdown: function(a) { var d, b = this.options,
                    c = this.pointers;!this.viewed || this.showing || this.viewing || this.hiding || (a.changedTouches ? cb(a.changedTouches, function(a) { c[a.identifier] = Bb(a) }) : c[a.pointerId || 0] = Bb(a), d = b.movable ? f : !1, Object.keys(c).length > 1 ? d = h : "touch" !== a.pointerType && "touchstart" !== a.type || !this.isSwitchable() || (d = g), this.action = d) }, pointermove: function(a) { var b = this.options,
                    c = this.pointers,
                    d = this.action,
                    e = this.image;
                this.viewed && d && (a.preventDefault(), a.changedTouches ? cb(a.changedTouches, function(a) { db(c[a.identifier], Bb(a, !0)) }) : db(c[a.pointerId || 0], Bb(a, !0)), d === f && b.transition && gb(e, y) && ib(e, y), this.change(a)) }, pointerup: function(a) { var b = this.action,
                    c = this.pointers;
                a.changedTouches ? cb(a.changedTouches, function(a) { delete c[a.identifier] }) : delete c[a.pointerId || 0], b && (b === f && this.options.transition && hb(this.image, y), this.action = !1) }, resize: function() { var a = this; if (this.isShown && !this.hiding && (this.initContainer(), this.initViewer(), this.renderViewer(), this.renderList(), this.viewed && this.initImage(function() { a.renderImage() }), this.played)) { if (this.options.fullscreen && this.fulled && !document.fullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) return this.stop(), void 0;
                    cb(this.player.getElementsByTagName("img"), function(b) { sb(b, J, a.loadImage.bind(a), { once: !0 }), tb(b, J) }) } }, wheel: function(a) { var c, d, b = this;
                this.viewed && (a.preventDefault(), this.wheeling || (this.wheeling = !0, setTimeout(function() { b.wheeling = !1 }, 50), c = Number(this.options.zoomRatio) || .1, d = 1, a.deltaY ? d = a.deltaY > 0 ? 1 : -1 : a.wheelDelta ? d = -a.wheelDelta / 120 : a.detail && (d = a.detail > 0 ? 1 : -1), this.zoom(-d * c, !0, a))) } },
        Gb = 0,
        Hb = { isIOS: !!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), emptyFn: function() {}, getDom: function(a) { return "string" == typeof a ? document.getElementById(a) : a }, id: function oc(a, b) { if (a && a.id) return a.id;
                Gb += 1; var oc = (b || "ext-") + Gb; return a && (a.id = oc), oc }, isEmpty: function(a, b) { return null == a || (b ? !1 : "" === a) || this.isArray(a) && 0 === a.length }, isArray: "isArray" in Array ? Array.isArray : function(a) { return "[object Array]" === toString.call(a) }, isFunction: "undefined" != typeof document && "function" == typeof document.getElementsByTagName("body") ? function(a) { return !!a && "[object Function]" === toString.call(a) } : function(a) { return !!a && "function" == typeof a } },
        Ib = { isFileUri: function(a) { return Hb.isEmpty(a) ? !1 : "file://" === a.substr(0, 7).toLowerCase() }, splitPath: function(a) { var b = "",
                    c = "",
                    d = a.lastIndexOf("/"); return -1 === d ? c = a : (b = a.substr(0, d), c = a.substr(d + 1)), d = c.indexOf("?"), d >= 0 && (c = c.substr(0, d)), [b, this.stripIllegalChars(c)] }, getFileName: function(a) { return a ? this.splitPath(a)[1] : "" }, getFileNameWoExt: function(a) { var b, c; return a ? (b = this.splitPath(a), c = b[1].lastIndexOf("."), 0 > c ? b[1] : b[1].substr(0, c)) : "" }, getExtension: function(a, b) { var c, d, e; return a ? (c = this.splitPath(a), d = c[1].lastIndexOf("."), 0 > d ? "" : (e = c[1].substr(d + 1), b ? e.toLowerCase() : e)) : "" }, stripIllegalChars: function(a) { return Hb.isEmpty(a) ? a : a.replace(/[\\\\\/:*?"<>|]/g, "_") } };
    return void 0 === window.LocalFileSystem && void 0 !== window.PERSISTENT && (window.LocalFileSystem = { PERSISTENT: window.PERSISTENT, TEMPORARY: window.TEMPORARY }), window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem, window.resolveLocalFileSystemURL = window.resolveLocalFileSystemURL || window.webkitResolveLocalFileSystemURL, Jb = { FILEERROR: { 1: "NOT_FOUND_ERR", 2: "SECURITY_ERR", 3: "ABORT_ERR", 4: "NOT_READABLE_ERR", 5: "ENCODING_ERR", 6: "NO_MODIFICATION_ALLOWED_ERR", 7: "INVALID_STATE_ERR", 8: "SYNTAX_ERR", 9: "INVALID_MODIFICATION_ERR", 10: "QUOTA_EXCEEDED_ERR", 11: "TYPE_MISMATCH_ERR", 12: "PATH_EXISTS_ERR", 1e3: "UNKNOWN_ERR" }, parse: function(a, b) { var e, f, c = null,
                d = null; return (null === a || void 0 === a) && (a = 1), e = window.cordova ? cordova.file.tempDirectory : null, f = "", window.cordova ? f = window.cordova.file.dataDirectory : window.cefMain && (f = window.cefMain.getDataDirectory()), Ib.isFileUri(b) ? (d = b, e && 0 === b.indexOf(e) ? (a = 0, c = decodeURIComponent(b.substr(e.length))) : 0 === b.indexOf(f) ? (a = 1, c = decodeURIComponent(b.substr(f.length))) : console.error("暂不支持的路径")) : (c = b, 0 === a && e ? d = e + b : 1 === a ? d = f + b : console.error("暂不支持的路径")), { root: a, relative: c, full: d } }, load0: function() { var a = this; return new Promise(function(b, c) { return a.tmpFileSystem ? b(a.tmpFileSystem) : window.requestFileSystem ? (window.resolveLocalFileSystemURL(cordova.file.tempDirectory, function(c) { a.tmpFileSystem = c.filesystem, b(a.tmpFileSystem) }, function(b) { console.error("FileSystem", "load0 failed", b, a.FILEERROR[b.code]), c(b) }), void 0) : c(new Error("不支持 requestFileSystem")) }) }, load1: function() { var a = this; return new Promise(function(b, c) { if (a.fileSystem) return b(a.fileSystem); if (!window.requestFileSystem) return c(new Error("不支持 requestFileSystem")); var d = "";
                window.cordova ? d = window.cordova.file.dataDirectory : window.cefMain && (d = window.cefMain.getDataDirectory()), window.resolveLocalFileSystemURL(d, function(c) { a.fileSystem = c.filesystem, b(a.fileSystem) }, function(b) { console.error("FileSystem", "load1 failed", b, a.FILEERROR[b.code]), c(b) }) }) } }, Kb = { queues0: {}, queues1: {}, create_r: function(a, b, c, d, e) { var f, g, h, i, j;
            e = "undefined" == typeof e ? 0 : e, f = this, g = b.split("/"), h = e + 1, i = g.slice(0, h).join("/"), j = function(a) { return function() { f.create_r.apply(f, V(a)) } }, h === g.length || /\/$/.test(i) ? f.create_one(a, i, c, d) : f.create_one(a, i, j([a, b, c, d, h]), d) }, create_one: function(a, b, c, d) { Jb["load" + a]().then(function(a) { a.root.getDirectory(b, { create: !0, exclusive: !1 }, function(a) { c && c(a) }, function(a) { console.error("DirMgr", "create directory failed", Jb.FILEERROR[a.code]), d && d(a) }) }).catch(d) }, create: function(a, b) { var c = this; return new Promise(function(d, e) { var j, k, f = Jb.parse(a, b),
                    g = f.relative,
                    h = "queues" + f.root,
                    i = c[h][g];
                i || (i = [], c[h][g] = i, j = function(a) { var d, b = c[h][g]; if (b) { for (; b.length;) d = b.shift(), d.resolve && d.resolve(a);
                        delete c[h][g] } }, k = function(a) { var d, b = c[h][g]; if (b) { for (; b.length;) d = b.shift(), d.reject && d.reject(a);
                        delete c[h][g] } }, Jb["load" + f.root]().then(function(a) { a.root.getDirectory(g, { create: !1 }, j, function(a) { 1 === a.code ? c.create_r(f.root, g, j, k) : k(a) }) }).catch(k)), i.push({ resolve: d, reject: e }) }) }, moveTo: function(a, b, c, d) { var e = this; return new Promise(function(f, g) { e.copyOrMove(a, b, c, d, 2, !0, f, g) }) }, copyTo: function(a, b, c, d) { var e = this; return new Promise(function(f, g) { e.copyOrMove(a, b, c, d, 2, !1, f, g) }) }, copyOrMove: function(a, b, c, d, e, f, g, h) { var i, j, k, l, m, n, o;
            Hb.isEmpty(b) || Hb.isEmpty(d) || (i = this, g = Hb.isFunction(g) ? g : Hb.emptyFn, j = function(a) { console.error("DirMgr", "copyOrMove failed", a.code ? i.FILEERROR[a.code] : a), Hb.isFunction(h) && h(a) }, k = i.parse(c, d), l = k.relative, m = Ib.splitPath(l), n = m[0], o = m[1], i.create(c, n).then(function(c) { var d, h;
                Ib.isFileUri(b) ? window.resolveLocalFileSystemURL(b, function(a) { a[f ? "moveTo" : "copyTo"](c, o, function(a) { g(a.toURL()) }, j) }, j) : (d = i.parse(a, b), h = d.relative, i["load" + d.root]().then(function(a) { var b = "";
                    1 === e ? b = "getFile" : 2 === e && (b = "getDirectory"), b ? a.root[b](h, { create: !1 }, function(a) { a[f ? "moveTo" : "copyTo"](c, o, function(a) { g(a.toURL()) }, j) }, j) : j("unknown exception") }).catch(j)) }).catch(j)) }, remove: function(a, b) { return new Promise(function(c, d) { var e = Jb.parse(a, b),
                    f = e.relative;
                Jb["load" + e.root]().then(function(a) { a.root.getDirectory(f, { create: !1 }, function(a) { a.removeRecursively(c, d) }, function(a) { 1 !== a.code && d(a) }) }).catch(d) }) } }, Lb = { downFile: function(a, b, c, d) { var e = this; return new Promise(function(f, g) { var q, r, s, h = !(!d || !d.force),
                    i = Jb.parse(b, c),
                    j = i.relative,
                    k = Ib.splitPath(j),
                    l = k[0],
                    m = k[1],
                    n = "queues" + i.root,
                    o = j,
                    p = e[n][o];
                p || (p = [], e[n][o] = p, q = function(a) { var b, c; if (console.log("file download succeed", a), b = e[n][o]) { for (; b.length;) c = b.shift(), c.resolve && c.resolve(a.toURL());
                        delete e[n][o] } }, r = function(a) { var b, c; if (console.log("file download failed", a), b = e[n][o]) { for (; b.length;) c = b.shift(), c.reject && c.reject(a);
                        delete e[n][o] } }, s = function(b) { var c = new FileTransfer;
                    c.onprogress = function(a) { var b, c;
                        a.lengthComputable && (b = (a.loaded / (100 * a.total)).toFixed(2), c = e[n][o], c && c.length && c.forEach(function(a) { a.downloading && a.downloading(b) })) }, c.download(a, b, q, r) }, Kb.create(i.root, l).then(function(a) { var b = a.toURL() + encodeURIComponent(m);
                    h ? s(b) : a.getFile(m, { create: !1 }, function(a) { console.log("file found", a), q(a, !0) }, function(a) { 1 === a.code ? s(b) : r(a) }) }).catch(r)), p.push({ resolve: f, reject: g, downloading: d && Hb.isFunction(d.downloading) ? d.downloading : null }) }) }, downFileForSrc: function() { var b, c, d, e, f, g, h, i, a = this; for (b = arguments.length, c = Array(b), d = 0; b > d; d++) c[d] = arguments[d]; return e = c.url, f = c.saveRoot, g = c.savePath, h = c.options, i = Jb.parse(f, g), window.cordova && Hb.isIOS && window.indexedDB && 0 !== i.root ? new Promise(function(b, c) { var j, k, l, m, d = "srcQueues" + i.root,
                    f = i.relative,
                    g = a[d][f];
                g || (g = [], a[d][f] = g, j = function(b) { var c, e; if (console.log("file download succeed", b), c = a[d][f]) { for (; c.length;) e = c.shift(), e.resolve && e.resolve(b);
                        delete a[d][f] } }, k = function(b) { var c, e; if (console.log("file download failed", b), c = a[d][f]) { for (; c.length;) e = c.shift(), e.reject && e.reject(b);
                        delete a[d][f] } }, l = !(!h || !h.force), m = function() { a.downFile(e, i.root, i.relative, { force: l, downloading: function(b) { var c = a[d][f];
                            c && c.length && c.forEach(function(a) { a.downloading && a.downloading(b) }) } }).then(function(b) { return a.copyTo(i.root, b, 0, i.relative).then(function(a) { j(a) }) }).catch(k) }, l ? m() : a.exists(0, i.relative).then(function(b) { if (b) { var c = b.toURL();
                        j(c), a.exists(1, i.relative).then(function(b) { return b ? void 0 : a.copyTo(0, c, i.root, i.relative) }) } else m() }).catch(k)), g.push({ resolve: b, reject: c, downloading: h && Hb.isFunction(h.downloading) ? h.downloading : null }) }) : a.downFile.apply(a, V(c)) }, remove: function(a, b) { return new Promise(function(c, d) { var f, g, e = function(a) { console.error("FileMgr", "remove failed", a.code ? Jb.FILEERROR[a.code] : a), d(a) };
                Hb.isEmpty(b) && e("路径为空"), Ib.isFileUri(b) ? window.resolveLocalFileSystemURL(b, function(a) { a.remove(c, e) }, e) : (f = Jb.parse(a, b), g = f.relative, Jb["load" + f.root]().then(function(a) { a.root.getFile(g, { create: !1, exclusive: !1 }, function(a) { a.remove(c, e) }, e) }).catch(e)) }) }, exists: function(a, b) { return new Promise(function(c, d) { var f, g, e = function(a) { console.error("FileMgr", "check exists failed", a.code ? Jb.FILEERROR[a.code] : a), d(a) };
                Hb.isEmpty(b) && e("路径为空"), f = Jb.parse(a, b), g = f.relative, Jb["load" + f.root]().then(function(a) { a.root.getFile(g, { create: !1 }, c, function(a) { 1 === a.code ? c(null) : d(a) }) }).catch(e) }) }, moveTo: function(a, b, c, d) { return new Promise(function(e, f) { Kb.copyOrMove(a, b, c, d, 1, !0, e, f) }) }, copyTo: function(a, b, c, d) { return new Promise(function(e, f) { Kb.copyOrMove(a, b, c, d, 1, !1, e, f) }) }, solveDup: function(a, b, c) { var d = this; return new Promise(function(e, f) { var h, i, g = function(a) { console.error("FileMgr", "solveDup failed", a.code ? Jb.FILEERROR[a.code] : a), f(a) };
                Ib.isFileUri(b) ? window.resolveLocalFileSystemURL(b, function(a) { var b = Ib.getFileNameWoExt(c),
                        f = Ib.getExtension(c);
                    d.solveDupInner(a, b, f, 0, e) }, g) : (h = Jb.parse(a, b), i = h.relative, Jb["load" + h.root]().then(function(a) { a.root.getDirectory(i, { create: !1 }, function(a) { var b = Ib.getFileNameWoExt(c),
                            f = Ib.getExtension(c);
                        d.solveDupInner(a, b, f, 0, e) }, g) }).catch(g)) }) }, open: function(a) { return new Promise(function(b, c) { var d = a;
                window.FileEntry && a instanceof window.FileEntry && (d = a.toURL()), d = decodeURIComponent(d), window.plugins && plugins.fileOpener ? plugins.fileOpener.open(d, b, function(a) { c(a), alert(a.message || "") }) : window.cefMain && cefMain.open(d, b, function(a) { c(a), alert(a.message || "") }) }) }, queues0: {}, queues1: {}, srcQueues0: {}, srcQueues1: {}, solveDupInner: function(a, b, c, d, e) { var f = this,
                g = b + (0 === d ? "." : " (" + d + ").") + c;
            a.getFile(g, { create: !1 }, function() { f.solveDupInner(a, b, c, d + 1, e) }, function() { e(g) }) } }, Mb = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAAwCAMAAACR11I4AAAAhFBMVEUAAACww9jj7fjA0OEAAAADAwP3+vwEBAQAAAALCwvExsgICAgKCgrMz9P6+vrIy8+ipah5eXnn5+f39/jt7e3P1Nq6vL/z8/P8/Py/zNr////Y4u3I2er7/P3q8fjG3PTu8/jC2fHn7vbw9fq70enp8PbK3/bt8vjP4/i91e/T5vvR5fr6AzUjAAAAGnRSTlMA/fj9Aiv9BhMMYyIahulBIEaN2LGqeMru1WReUU4AAAJ4SURBVHhepdbrkqMgEIDRIAyIRnMzyU4D3nObff/32243biYRXVPz/ZuC02TUslz8PKE89UuTiY6vdjDouKY1lcFUuxVt0ql3jQaoMIGpUo0+BGgGOUhXaiH08uDANSMBhF5PIYvwIuhl9AsHvO9rE8gtDlDLTQruXX/iDOOZFkKFmx249/yF8RvG2G5NAz6OAG953t66WktXUek4A5ATvnyJE6Y4yIhuQ7wHcOVrY/7U9r51AEk3IHHg5vqm6n1VOoDs74MgQc70pem9wWEA2+5BSIwb9/4fUHU8W6JXEWNmri8vRYUVZSkB9jE9BQd2q/hs38g8CHJJT3HS8QR51ZoRfxmEE5qmdCCjJfE9qyj+vGnCU8jTTfe/fyKn2tMbvnGw24TI9Sev7pn5vgE4Ehdr1hZ9fK4nnsXEV8T72mCmv9834rfiW9br8+8ZxqwEdyCuIlYV3+On/JHX18wW3Hb3bSESVpyfKsz/PCfRso3GJYV/vMR9/vTI2A5YthLot8Grt/Vjr8/zfh/HAUIPB5hJb6rrvYJHqhtwfY5P+Zo/Np554htQmQlvz09H7X0D7NDX9wI8fjggCZ593TfwyJ/jn3ow4GzGvLHX1yxfi9cBdszT8f4BUTDDm/NvT2e+6gY8Fq7G7zkC74DoZYD1++uXvyunl1AUfPUZv89HfLBFL9b8n8/9vnGDAODXMaI3MH1k9QvlwPuTALtNrNVCqK0Dl9d9s3zjQCYfoRJCrI8AksR8n0uAbLPU9PqnT6hLPepT8JYeYjwcL1wGY6XkdeQdsMfDBX2dpuM80uhVGH94outG6SUu+4vDbovSvpQgTavjIf9pfwA8bC3+UnIYZgAAAABJRU5ErkJggg==", Nb = {
        show: function() { var d, e, a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : !1,
                b = this.element,
                c = this.options; return c.inline || this.showing || this.isShown || this.showing ? this : this.ready ? (bb(c.show) && sb(b, A, c.show, { once: !0 }), tb(b, A) !== !1 && this.ready ? (this.hiding && this.transitioning.abort(), this.showing = !0, this.open(), d = this.viewer, ib(d, o), c.transition && !a ? (e = this.shown.bind(this), this.transitioning = { abort: function() { rb(d, O, e), ib(d, s) } }, hb(d, y), d.offsetWidth, sb(d, O, e, { once: !0 }), hb(d, s)) : (hb(d, s), this.shown()), this) : this) : (this.build(), this.ready && this.show(a), this) },
        hide: function Qc() { var d, e, Qc, a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : !1,
                b = this.element,
                c = this.options; return c.inline || this.hiding || !this.isShown && !this.showing ? this : (bb(c.hide) && sb(b, C, c.hide, { once: !0 }), tb(b, C) === !1 ? this : (this.showing && this.transitioning.abort(), this.hiding = !0, this.played ? this.stop() : this.viewing && this.viewing.abort(), d = this.viewer, c.transition && !a ? (e = this.hidden.bind(this), Qc = function() { sb(d, O, e, { once: !0 }), ib(d, s) }, this.transitioning = { abort: function() { this.viewed ? rb(this.image, O, Qc) : rb(d, O, e) } }, this.viewed ? (sb(this.image, O, Qc, { once: !0 }), this.zoomTo(0, !1, !1, !0)) : Qc()) : (ib(d, s), this.hidden()), this)) },
        view: function() { var c, d, e, f, g, h, j, k, l, m, n, o, p, q, a = this,
                b = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; return b = Number(b) || 0, this.isShown ? this.hiding || this.played || 0 > b || b >= this.length || this.viewed && b === this.index ? this : (this.viewing && this.viewing.abort(), c = this.element, d = this.options, e = this.title, f = this.canvas, g = this.items[b], h = g.querySelector("img"), j = mb(h, "originalUrl"), k = h.getAttribute("alt"), l = document.createElement("img"), (window.cordova || window.cefMain) && /https?:\/\//i.test(j) ? (m = Hb.id(l), n = Ib.getFileName(j), o = d.saveDir, Hb.isEmpty(o) || "/" === o.charAt(o.length - 1) || (o += "/"), Lb.downFileForSrc(j, 1, "" + o + n, {}).then(function(b) { var c = Hb.getDom(m);
                c && c === a.image && (a.viewing.abort(), c.src = b) }).catch(function(b) { console.log(b); var c = Hb.getDom(m);
                c && c === a.image && (a.viewing.abort(), c.src = Mb) })) : l.src = j, l.alt = k, bb(d.view) && sb(c, E, d.view, { once: !0 }), tb(c, E, { originalImage: this.images[b], index: b, image: l }) === !1 || !this.isShown || this.hiding || this.played ? this : (this.image = l, ib(this.items[this.index], i), hb(g, i), this.viewed = !1, this.index = b, this.imageData = {}, hb(l, t), d.loading && hb(f, u), f.innerHTML = "", f.appendChild(l), this.renderList(), e.innerHTML = "", p = function() { var b = a.imageData;
                e.textContent = k + " (" + b.naturalWidth + " × " + b.naturalHeight + ")" }, q = void 0, sb(c, F, p, { once: !0 }), this.viewing = { abort: function() { rb(c, F, p), l.complete ? this.imageRendering ? this.imageRendering.abort() : this.imageInitializing && this.imageInitializing.abort() : (rb(l, J, q), this.timeout && clearTimeout(this.timeout)) } }, l.complete ? this.load() : (sb(l, J, q = this.load.bind(this), { once: !0 }), this.timeout && clearTimeout(this.timeout), this.timeout = setTimeout(function() { ib(l, t), a.timeout = !1 }, 1e3)), this)) : (this.index = b, this.show()) },
        prev: function() { var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : !1,
                b = this.index - 1; return 0 > b && (b = a ? this.length - 1 : 0), this.view(b), this },
        next: function() { var a = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : !1,
                b = this.length - 1,
                c = this.index + 1; return c > b && (c = a ? 0 : b), this.view(c), this },
        move: function(a, b) { var c = this.imageData; return this.moveTo(Z(a) ? a : c.left + Number(a), Z(b) ? b : c.top + Number(b)), this },
        moveTo: function(a) { var d, b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : a,
                c = this.imageData; return a = Number(a), b = Number(b), this.viewed && !this.played && this.options.movable && (d = !1, Y(a) && (c.left = a, d = !0), Y(b) && (c.top = b, d = !0), d && this.renderImage()), this },
        zoom: function(a) { var b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : !1,
                c = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null,
                d = this.imageData; return a = Number(a), a = 0 > a ? 1 / (1 - a) : 1 + a, this.zoomTo(d.width * a / d.naturalWidth, b, c), this },
        zoomTo: function(a) { var h, i, j, k, l, m, b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : !1,
                c = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null,
                d = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : !1,
                e = this.options,
                f = this.pointers,
                g = this.imageData; return a = Math.max(0, a), Y(a) && this.viewed && !this.played && (d || e.zoomable) && (d || (h = Math.max(.01, e.minZoomRatio), i = Math.min(100, e.maxZoomRatio), a = Math.min(Math.max(a, h), i)), c && a > .95 && 1.05 > a && (a = 1), j = g.naturalWidth * a, k = g.naturalHeight * a, c ? (l = ub(this.viewer), m = f && Object.keys(f).length ? Cb(f) : { pageX: c.pageX, pageY: c.pageY }, g.left -= (j - g.width) * ((m.pageX - l.left - g.left) / g.width), g.top -= (k - g.height) * ((m.pageY - l.top - g.top) / g.height)) : (g.left -= (j - g.width) / 2, g.top -= (k - g.height) / 2), g.width = j, g.height = k, g.ratio = a, this.renderImage(), b && this.tooltip()), this },
        rotate: function(a) { return this.rotateTo((this.imageData.rotate || 0) + Number(a)), this },
        rotateTo: function(a) { var b = this.imageData; return a = Number(a), Y(a) && this.viewed && !this.played && this.options.rotatable && (b.rotate = a, this.renderImage()), this },
        scaleX: function(a) { return this.scale(a, this.imageData.scaleY), this },
        scaleY: function(a) { return this.scale(this.imageData.scaleX, a), this },
        scale: function(a) { var d, b = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : a,
                c = this.imageData; return a = Number(a), b = Number(b), this.viewed && !this.played && this.options.scalable && (d = !1, Y(a) && (c.scaleX = a, d = !0), Y(b) && (c.scaleY = b, d = !0), d && this.renderImage()), this },
        play: function bd() { var c, d, e, f, g, h, bd, a = this,
                b = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : !1; return !this.isShown || this.played ? this : (c = this.options, d = this.player, e = this.loadImage.bind(this), f = [], g = 0, h = 0, this.played = !0, this.onLoadWhenPlay = e, b && this.requestFullscreen(), hb(d, x), cb(this.items, function(a, b) { var j = a.querySelector("img"),
                    l = document.createElement("img");
                l.src = mb(j, "originalUrl"), l.alt = j.getAttribute("alt"), g += 1, hb(l, k), jb(l, y, c.transition), gb(a, i) && (hb(l, s), h = b), f.push(l), sb(l, J, e, { once: !0 }), d.appendChild(l) }), Y(c.interval) && c.interval > 0 && (bd = function j() { a.playing = setTimeout(function() { ib(f[h], s), h += 1, h = g > h ? h : 0, hb(f[h], s), j() }, c.interval) }, g > 1 && bd()), this) },
        stop: function() {
            var b, a = this;
            return this.played ? (b = this.player, this.played = !1, clearTimeout(this.playing), cb(b.getElementsByTagName("img"), function(b) {
                rb(b, J, a.onLoadWhenPlay)
            }), ib(b, x), b.innerHTML = "", this.exitFullscreen(), this) : this
        },
        full: function() { var a = this,
                b = this.options,
                c = this.viewer,
                d = this.image,
                e = this.list; return !this.isShown || this.played || this.fulled || !b.inline ? this : (this.fulled = !0, this.open(), hb(this.button, n), b.transition && (ib(e, y), this.viewed && ib(d, y)), hb(c, l), c.setAttribute("style", ""), fb(c, { zIndex: b.zIndex }), this.initContainer(), this.viewerData = db({}, this.containerData), this.renderList(), this.viewed && this.initImage(function() { a.renderImage(function() { b.transition && setTimeout(function() { hb(d, y), hb(e, y) }, 0) }) }), this) },
        download: function(a) { var c, b = document.createElement("a");
            b.setAttribute("href", a), b.setAttribute("download", ""), c = document.createEvent("MouseEvents"), c.initMouseEvent("click", !0, !0, window, 0, 0, 0, 0, 0, !1, !1, !0, !1, 0, null), b.dispatchEvent(c) },
        exit: function() { var a = this,
                b = this.options,
                c = this.viewer,
                d = this.image,
                e = this.list; return this.isShown && !this.played && this.fulled && b.inline ? (this.fulled = !1, this.close(), ib(this.button, n), b.transition && (ib(e, y), this.viewed && ib(d, y)), ib(c, l), fb(c, { zIndex: b.zIndexInline }), this.viewerData = db({}, this.parentData), this.renderViewer(), this.renderList(), this.viewed && this.initImage(function() { a.renderImage(function() { b.transition && setTimeout(function() { hb(d, y), hb(e, y) }, 0) }) }), this) : this },
        tooltip: function() { var a = this,
                b = this.options,
                c = this.tooltipBox,
                d = this.imageData; return this.viewed && !this.played && b.tooltip ? (c.textContent = Math.round(100 * d.ratio) + "%", this.tooltipping ? clearTimeout(this.tooltipping) : b.transition ? (this.fading && tb(c, O), hb(c, x), hb(c, k), hb(c, y), c.offsetWidth, hb(c, s)) : hb(c, x), this.tooltipping = setTimeout(function() { b.transition ? (sb(c, O, function() { ib(c, x), ib(c, k), ib(c, y), a.fading = !1 }, { once: !0 }), ib(c, s), a.fading = !0) : ib(c, x), a.tooltipping = !1 }, 1e3), this) : this },
        toggle: function() { return 1 === this.imageData.ratio ? this.zoomTo(this.initialImageData.ratio, !0) : this.zoomTo(1, !0), this },
        reset: function() { return this.viewed && !this.played && (this.imageData = db({}, this.initialImageData), this.renderImage()), this },
        update: function() { var d, e, f, a = this.element,
                b = this.options,
                c = this.isImg; return c && !a.parentNode ? this.destroy() : (d = [], cb(c ? [a] : a.querySelectorAll("img"), function(a) { b.filter ? b.filter(a) && d.push(a) : d.push(a) }), d.length ? (this.images = d, this.length = d.length, this.ready ? (e = [], cb(this.items, function(a, b) { var c = a.querySelector("img"),
                    f = d[b];
                f ? f.src !== c.src && e.push(b) : e.push(b) }), fb(this.list, { width: "auto" }), this.initList(), this.isShown && (this.length ? this.viewed && (f = e.indexOf(this.index), f >= 0 ? (this.viewed = !1, this.view(Math.max(this.index - (f + 1), 0))) : hb(this.items[this.index], i)) : (this.image = null, this.viewed = !1, this.index = 0, this.imageData = {}, this.canvas.innerHTML = "", this.title.innerHTML = ""))) : this.build(), this) : this) },
        destroy: function() { var a = this.element,
                b = this.options; return mb(a, e) ? (this.destroyed = !0, this.ready ? (this.played && this.stop(), b.inline ? (this.fulled && this.exit(), this.unbind()) : this.isShown ? (this.viewing && (this.imageRendering ? this.imageRendering.abort() : this.imageInitializing && this.imageInitializing.abort()), this.hiding && this.transitioning.abort(), this.hidden()) : this.showing && (this.transitioning.abort(), this.hidden()), this.ready = !1, this.viewer.parentNode.removeChild(this.viewer)) : b.inline && (this.delaying ? this.delaying.abort() : this.initializing && this.initializing.abort()), b.inline || rb(a, G, this.onStart), ob(a, e), this) : this }
    }, Ob = { open: function() { var a = this.body;
            hb(a, w), a.style.paddingRight = this.scrollbarWidth + (parseFloat(this.initialBodyPaddingRight) || 0) + "px" }, close: function() { var a = this.body;
            ib(a, w), a.style.paddingRight = this.initialBodyPaddingRight }, shown: function() { var a = this.element,
                b = this.options;
            this.fulled = !0, this.isShown = !0, this.render(), this.bind(), this.showing = !1, bb(b.shown) && sb(a, B, b.shown, { once: !0 }), tb(a, B) !== !1 && this.ready && this.isShown && !this.hiding && this.view(this.index) }, hidden: function() { var a = this.element,
                b = this.options;
            this.fulled = !1, this.viewed = !1, this.isShown = !1, this.close(), this.unbind(), hb(this.viewer, o), this.resetList(), this.resetImage(), this.hiding = !1, this.destroyed || (bb(b.hidden) && sb(a, D, b.hidden, { once: !0 }), tb(a, D)) }, requestFullscreen: function() { var b, a = this.element.ownerDocument;!this.fulled || a.fullscreenElement || a.mozFullScreenElement || a.webkitFullscreenElement || a.msFullscreenElement || (b = a.documentElement, b.requestFullscreen ? b.requestFullscreen() : b.msRequestFullscreen ? b.msRequestFullscreen() : b.mozRequestFullScreen ? b.mozRequestFullScreen() : b.webkitRequestFullscreen && b.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)) }, exitFullscreen: function() { if (this.fulled) { var a = this.element.ownerDocument;
                a.exitFullscreen ? a.exitFullscreen() : a.msExitFullscreen ? a.msExitFullscreen() : a.mozCancelFullScreen ? a.mozCancelFullScreen() : a.webkitExitFullscreen && a.webkitExitFullscreen() } }, change: function(a) { var b = this.options,
                c = this.pointers,
                d = c[Object.keys(c)[0]],
                e = d.endX - d.startX,
                i = d.endY - d.startY; switch (this.action) {
                case f:
                    this.move(e, i); break;
                case h:
                    this.zoom(Ab(c), !1, a); break;
                case g:
                    this.action = "switched", this.pointers = {}, Math.abs(e) > Math.abs(i) && (e > 1 ? this.prev(b.loop) : -1 > e && this.next(b.loop)) }
            cb(c, function(a) { a.startX = a.endX, a.startY = a.endY }) }, isSwitchable: function() { var a = this.imageData,
                b = this.viewerData; return this.length > 1 && a.left >= 0 && a.top >= 0 && a.width <= b.width && a.height <= b.height } }, Pb = d.Viewer, Qb = function() {
        function c(b) { var d = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; if (T(this, c), !b || 1 !== b.nodeType) throw new Error("The first argument is required and must be an element.");
            this.element = b, this.options = db({}, a, ab(d) && d), this.action = !1, this.fading = !1, this.fulled = !1, this.hiding = !1, this.imageData = {}, this.index = 0, this.isImg = !1, this.isShown = !1, this.length = 0, this.played = !1, this.playing = !1, this.pointers = {}, this.ready = !1, this.showing = !1, this.timeout = !1, this.tooltipping = !1, this.viewed = !1, this.viewing = !1, this.wheeling = !1, this.init() } return U(c, [{ key: "init", value: function() { var d, f, g, h, i, j, a = this,
                    b = this.element,
                    c = this.options;
                mb(b, e) || (nb(b, e, this), d = "img" === b.tagName.toLowerCase(), f = [], cb(d ? [b] : b.querySelectorAll("img"), function(b) { bb(c.filter) ? c.filter.call(a, b) && f.push(b) : f.push(b) }), f.length && (this.isImg = d, this.length = f.length, this.images = f, g = b.ownerDocument, h = g.body || g.documentElement, this.body = h, this.scrollbarWidth = window.innerWidth - g.documentElement.clientWidth, this.initialBodyPaddingRight = window.getComputedStyle(h).paddingRight, Z(document.createElement(e).style.transition) && (c.transition = !1), c.inline ? (i = 0, j = function() { if (i += 1, i === a.length) { var b = void 0;
                        a.initializing = !1, a.delaying = { abort: function() { clearTimeout(b) } }, b = setTimeout(function() { a.delaying = !1, a.build() }, 0) } }, this.initializing = { abort: function() { cb(f, function(a) { a.complete || rb(a, J, j) }) } }, cb(f, function(a) { a.complete ? j() : sb(a, J, j, { once: !0 }) })) : sb(b, G, this.onStart = function(b) { var c = b.target; "img" === c.tagName.toLowerCase() && a.view(a.images.indexOf(c)) }))) } }, { key: "build", value: function() { var a, c, d, f, g, h, i, n, p, q, r, s, u, v, w, x, y; if (!this.ready) return a = this.element, c = this.options, d = a.parentNode, f = document.createElement("div"), f.innerHTML = b, g = f.querySelector("." + e + "-container"), h = g.querySelector("." + e + "-title"), i = g.querySelector("." + e + "-toolbar"), n = g.querySelector("." + e + "-navbar"), p = g.querySelector("." + e + "-button"), q = g.querySelector("." + e + "-canvas"), this.parent = d, this.viewer = g, this.title = h, this.toolbar = i, this.navbar = n, this.button = p, this.canvas = q, this.footer = g.querySelector("." + e + "-footer"), this.tooltipBox = g.querySelector("." + e + "-tooltip"), this.player = g.querySelector("." + e + "-player"), this.list = g.querySelector("." + e + "-list"), hb(h, c.title ? zb(c.title) : o), hb(n, c.navbar ? zb(c.navbar) : o), jb(p, o, !c.button), c.backdrop && (hb(g, e + "-backdrop"), c.inline || c.backdrop !== !0 || nb(q, Q, "hide")), c.toolbar ? (r = document.createElement("ul"), s = ab(c.toolbar), u = R.slice(0, 3), v = R.slice(7, 9), w = R.slice(9), s || hb(i, zb(c.toolbar)), cb(s ? c.toolbar : R, function(a, b) { var h, i, j, d = s && ab(a),
                        f = s ? lb(b) : a,
                        g = d && !Z(a.show) ? a.show : a;!g || !c.zoomable && -1 !== u.indexOf(f) || !c.rotatable && -1 !== v.indexOf(f) || !c.scalable && -1 !== w.indexOf(f) || (h = d && !Z(a.size) ? a.size : a, i = d && !Z(a.click) ? a.click : a, j = document.createElement("li"), j.setAttribute("role", "button"), hb(j, e + "-" + f), bb(i) || nb(j, Q, f), Y(g) && hb(j, zb(g)), -1 !== ["small", "large"].indexOf(h) ? hb(j, e + "-" + h) : "play" === f && hb(j, e + "-large"), bb(i) && sb(j, G, i), r.appendChild(j)) }), i.appendChild(r)) : hb(i, o), c.rotatable || (x = i.querySelectorAll('li[class*="rotate"]'), hb(x, t), cb(x, function(a) { i.appendChild(a) })), c.inline ? (hb(p, m), fb(g, { zIndex: c.zIndexInline }), "static" === window.getComputedStyle(d).position && fb(d, { position: "relative" }), d.insertBefore(g, a.nextSibling)) : (hb(p, j), hb(g, l), hb(g, k), hb(g, o), fb(g, { zIndex: c.zIndex }), y = c.container, W(y) && (y = a.ownerDocument.querySelector(y)), y || (y = this.body), y.appendChild(g)), c.inline && (this.render(), this.bind(), this.isShown = !0), this.ready = !0, bb(c.ready) && sb(a, z, c.ready, { once: !0 }), tb(a, z) === !1 ? (this.ready = !1, void 0) : (this.ready && c.inline && this.view(), void 0) } }], [{ key: "noConflict", value: function() { return window.Viewer = Pb, c } }, { key: "setDefaults", value: function(b) { db(a, ab(b) && b) } }]), c }(), db(Qb.prototype, Db, Eb, Fb, Nb, Ob), Qb
});